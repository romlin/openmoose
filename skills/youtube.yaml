name: youtube
description: Play a specific YouTube video or search for the latest video by a creator
examples:
  - "play latest video by pewdiepie"
  - "watch the latest youtube video from mrbeast"
  - "play pewdiepie latest"
  - "play the latest video from baldandbankrupt"
  - "open the latest video by drew gooden"
  - "play youtube video https://www.youtube.com/watch?v=dQw4w9WgXcQ"
  - "watch https://www.youtube.com/watch?v=dQw4w9WgXcQ"
  - "play youtube link https://youtu.be/dQw4w9WgXcQ"
  - "play video by creator"
  - "search and play youtube video"
args:
  id:
    patterns:
      - 'https?://(?:www\.)?(?:youtube\.com/watch\?v=|youtu\.be/)([a-zA-Z0-9_-]+)'
  query:
    patterns:
      - "(?:play|watch|open) (?:the )?latest (?:youtube )?video (?:by|from) ([a-zA-Z0-9\\s]+)"
      - "(?:play|watch|open) ([a-zA-Z0-9\\s]+) last video"
      - "(?:play|watch|open) ([a-zA-Z0-9\\s]+) latest"
host: true
command: "ID_INPUT={{id}}; QUERY={{query}}; if [ -n \"$ID_INPUT\" ]; then xdg-open \"https://www.youtube.com/watch?v=$ID_INPUT\" > /dev/null 2>&1 & echo \"Opened YouTube video $ID_INPUT on host screen.\"; elif [ -n \"$QUERY\" ]; then CHANNEL_URL=$(yt-dlp --print uploader_url --playlist-end 1 \"ytsearch1:$QUERY\" 2>/dev/null); if [ -n \"$CHANNEL_URL\" ]; then ID=$(yt-dlp --get-id --flat-playlist --playlist-end 1 \"$CHANNEL_URL/videos\" 2>/dev/null); if [ -n \"$ID\" ]; then xdg-open \"https://www.youtube.com/watch?v=$ID\" > /dev/null 2>&1 & echo \"Found and playing the latest video by $QUERY on host screen.\"; else echo \"Could not find videos on the channel for: $QUERY\"; exit 1; fi; else echo \"Could not find a YouTube channel for: $QUERY\"; exit 1; fi; else echo \"No video link or creator name found in the request.\"; exit 1; fi"
